<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <title>Protein Mutations</title>
        <style>
            #app {
                margin: 0%;
                border: 0ch;
                position:absolute;
                /* left: 100px; */
                /* top: 100px; */
                width: 75%;
                height: 75%;
                align-self: center;
                text-align: center;
            }
        </style>
        <link rel="stylesheet" type="text/css" href="/molstar-mutation/build/viewer/molstar.css" />
    </head>
    <body>
        <div style="text-align: center;align-content: center;">
            <h3>Pango Lineage: {{pdb}}</h3>
            <div style="align-self: flex-start; padding-left: 50px;"></div>
            <div style="align-content: flex-end;">
                <div id="app"></div>
                <script type="text/javascript" src="/molstar-mutation/build/viewer/molstar.js"></script>
                <script type="text/javascript">
                    function getParam(name, regex) {
                        var r = new RegExp(name + '=' + '(' + regex + ')[&]?', 'i');
                        return decodeURIComponent(((window.location.search || '').match(r) || [])[1] || '');
                    }

                    var debugMode = getParam('debug-mode', '[^&]+').trim() === '1';
                    if (debugMode) molstar.setDebugMode(debugMode, debugMode);

                    var hideControls = getParam('hide-controls', '[^&]+').trim() === '1';
                    var collapseLeftPanel = getParam('collapse-left-panel', '[^&]+').trim() === '1';
                    var pdbProvider = getParam('pdb-provider', '[^&]+').trim().toLowerCase();
                    var emdbProvider = getParam('emdb-provider', '[^&]+').trim().toLowerCase();
                    var viewer = new molstar.Viewer('app', {
                        layoutIsExpanded: false,
                        layoutShowRemoteState: false,
                        layoutShowSequence: true,
                        layoutShowLog: false,
                        layoutShowLeftPanel: false,
                        viewportShowExpand: false,
                        viewportShowSelectionMode: false,
                        viewportShowAnimation: false,
                        layoutShowControls: true,
                        viewportShowExpand: false,
                        collapseLeftPanel: collapseLeftPanel,
                        pdbProvider: pdbProvider || 'pdbe',
                        emdbProvider: emdbProvider || 'pdbe',
                    });
                    viewer.loadStructureFromUrl("/data/mutations/{{pdb}}.pdb", "pdb", false);
                </script>
            </div>
        </div>
    </body>
</html>